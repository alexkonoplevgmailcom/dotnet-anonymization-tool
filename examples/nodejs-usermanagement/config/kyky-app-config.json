{
  "applications": [
    {
      "name": "KYKY User Management System",
      "nameHebrew": "מערכת ניהול המשתמשים של KYKY",
      "description": "Advanced user management platform for KYKY Corporation",
      "descriptionHebrew": "פלטפורמה מתקדמת לניהול משתמשים עבור תאגיד KYKY",
      "version": "1.0.0",
      "company": "KYKY Corporation",
      "companyHebrew": "תאגיד KYKY",
      "environment": "development",
      "status": "active",
      "lastUpdate": "2024-07-09T10:00:00Z"
    }
  ],
  
  "server": {
    "host": "kyky-user-mgmt.kyky.com",
    "port": 3000,
    "protocol": "https",
    "environment": "development",
    "cluster": {
      "enabled": false,
      "workers": 4,
      "description": "הגדרות אשכול שרתים של KYKY"
    },
    "ssl": {
      "enabled": true,
      "certPath": "/etc/ssl/kyky/cert.pem",
      "keyPath": "/etc/ssl/kyky/key.pem",
      "caPath": "/etc/ssl/kyky/ca.pem"
    }
  },
  
  "database": {
    "type": "MongoDB",
    "host": "kyky-mongodb-cluster.kyky.com",
    "port": 27017,
    "name": "kyky_user_management",
    "username": "kyky_db_admin",
    "password": "${KYKY_MONGODB_PASSWORD}",
    "authSource": "admin",
    "options": {
      "useNewUrlParser": true,
      "useUnifiedTopology": true,
      "maxPoolSize": 50,
      "minPoolSize": 5,
      "maxIdleTimeMS": 30000,
      "serverSelectionTimeoutMS": 5000,
      "socketTimeoutMS": 45000
    },
    "connectionString": "mongodb://kyky_db_admin:${KYKY_MONGODB_PASSWORD}@kyky-mongodb-cluster.kyky.com:27017/kyky_user_management?authSource=admin",
    "description": "מסד נתונים MongoDB למערכת KYKY"
  },
  
  "redis": {
    "host": "kyky-redis.kyky.com",
    "port": 6379,
    "password": "${KYKY_REDIS_PASSWORD}",
    "database": 0,
    "keyPrefix": "kyky:user-mgmt:",
    "ttl": 3600,
    "description": "מטמון Redis למערכת ניהול משתמשי KYKY"
  },
  
  "authentication": {
    "jwt": {
      "secret": "${KYKY_JWT_SECRET}",
      "algorithm": "HS256",
      "expiresIn": "24h",
      "issuer": "KYKY-User-Management",
      "audience": "KYKY-Users",
      "refreshTokenExpiry": "7d"
    },
    "oauth": {
      "google": {
        "enabled": true,
        "clientId": "${KYKY_GOOGLE_CLIENT_ID}",
        "clientSecret": "${KYKY_GOOGLE_CLIENT_SECRET}",
        "callbackURL": "https://kyky-user-mgmt.kyky.com/auth/google/callback"
      },
      "microsoft": {
        "enabled": true,
        "clientId": "${KYKY_MICROSOFT_CLIENT_ID}",
        "clientSecret": "${KYKY_MICROSOFT_CLIENT_SECRET}",
        "callbackURL": "https://kyky-user-mgmt.kyky.com/auth/microsoft/callback"
      }
    },
    "session": {
      "secret": "${KYKY_SESSION_SECRET}",
      "resave": false,
      "saveUninitialized": false,
      "cookie": {
        "secure": true,
        "httpOnly": true,
        "maxAge": 86400000,
        "sameSite": "strict"
      }
    }
  },
  
  "security": {
    "cors": {
      "enabled": true,
      "origin": [
        "https://kyky.com",
        "https://admin.kyky.com",
        "https://portal.kyky.com"
      ],
      "methods": ["GET", "POST", "PUT", "DELETE", "PATCH"],
      "allowedHeaders": [
        "Content-Type",
        "Authorization",
        "X-KYKY-Token",
        "X-Requested-With"
      ],
      "credentials": true
    },
    "rateLimit": {
      "enabled": true,
      "windowMs": 900000,
      "max": 100,
      "message": {
        "error": "Too many requests from this IP for KYKY system",
        "errorHebrew": "יותר מדי בקשות מכתובת IP זו למערכת KYKY"
      },
      "standardHeaders": true,
      "legacyHeaders": false
    },
    "helmet": {
      "enabled": true,
      "contentSecurityPolicy": {
        "directives": {
          "defaultSrc": ["'self'"],
          "styleSrc": ["'self'", "'unsafe-inline'", "https://fonts.googleapis.com"],
          "fontSrc": ["'self'", "https://fonts.gstatic.com"],
          "imgSrc": ["'self'", "data:", "https:"],
          "scriptSrc": ["'self'"]
        }
      }
    }
  },
  
  "api": {
    "version": "v1",
    "baseUrl": "/api/kyky/v1",
    "documentation": {
      "enabled": true,
      "path": "/api/docs/kyky",
      "title": "KYKY User Management API",
      "titleHebrew": "API לניהול משתמשי KYKY",
      "description": "REST API for KYKY user management system",
      "descriptionHebrew": "REST API למערכת ניהול משתמשי KYKY"
    },
    "pagination": {
      "defaultLimit": 20,
      "maxLimit": 100
    },
    "validation": {
      "strictMode": true,
      "sanitizeInput": true
    }
  },
  
  "services": {
    "userService": {
      "enabled": true,
      "cache": {
        "enabled": true,
        "ttl": 1800,
        "description": "מטמון שירות משתמשי KYKY"
      },
      "validation": {
        "email": {
          "required": true,
          "format": "email",
          "domains": ["kyky.com", "gmail.com", "outlook.com"]
        },
        "password": {
          "minLength": 8,
          "requireUppercase": true,
          "requireLowercase": true,
          "requireNumbers": true,
          "requireSpecialChars": true
        }
      }
    },
    "authService": {
      "enabled": true,
      "maxLoginAttempts": 5,
      "lockoutDuration": 900000,
      "passwordResetExpiry": 3600000,
      "twoFactorAuth": {
        "enabled": false,
        "provider": "TOTP",
        "issuer": "KYKY User Management"
      }
    },
    "notificationService": {
      "enabled": true,
      "email": {
        "provider": "SendGrid",
        "apiKey": "${KYKY_SENDGRID_API_KEY}",
        "fromEmail": "noreply@kyky.com",
        "fromName": "KYKY User Management System"
      },
      "sms": {
        "provider": "Twilio",
        "accountSid": "${KYKY_TWILIO_SID}",
        "authToken": "${KYKY_TWILIO_TOKEN}",
        "fromNumber": "+972501234567"
      }
    }
  },
  
  "logging": {
    "level": "info",
    "format": "combined",
    "outputs": [
      {
        "type": "console",
        "enabled": true,
        "colorize": true,
        "timestamp": true
      },
      {
        "type": "file",
        "enabled": true,
        "filename": "/var/log/kyky/user-management-%DATE%.log",
        "maxSize": "20m",
        "maxFiles": "14d",
        "datePattern": "YYYY-MM-DD"
      },
      {
        "type": "database",
        "enabled": true,
        "collection": "kyky_system_logs",
        "level": "warn"
      }
    ],
    "auditLog": {
      "enabled": true,
      "events": [
        "user.create",
        "user.update",
        "user.delete",
        "user.login",
        "user.logout",
        "user.password.change"
      ],
      "retention": "365d"
    }
  },
  
  "monitoring": {
    "healthCheck": {
      "enabled": true,
      "endpoint": "/health/kyky",
      "interval": 30000,
      "timeout": 5000,
      "checks": [
        "database",
        "redis",
        "memory",
        "disk"
      ]
    },
    "metrics": {
      "enabled": true,
      "endpoint": "/metrics/kyky",
      "prometheus": {
        "enabled": true,
        "register": true,
        "prefix": "kyky_user_mgmt_"
      }
    },
    "alerts": {
      "enabled": true,
      "webhook": "https://alerts.kyky.com/webhook",
      "channels": [
        {
          "name": "slack",
          "url": "${KYKY_SLACK_WEBHOOK}",
          "events": ["error", "critical"]
        },
        {
          "name": "email",
          "recipients": ["devops@kyky.com", "support@kyky.com"],
          "events": ["critical"]
        }
      ]
    }
  },
  
  "features": {
    "userProfiles": {
      "enabled": true,
      "avatarUpload": {
        "enabled": true,
        "maxSize": "5MB",
        "allowedTypes": ["image/jpeg", "image/png", "image/gif"],
        "storage": "s3",
        "bucket": "kyky-user-avatars"
      }
    },
    "roleManagement": {
      "enabled": true,
      "defaultRole": "user",
      "availableRoles": [
        {
          "name": "admin",
          "nameHebrew": "מנהל",
          "permissions": ["all"]
        },
        {
          "name": "manager",
          "nameHebrew": "מנהל צוות",
          "permissions": ["users.read", "users.create", "users.update"]
        },
        {
          "name": "user",
          "nameHebrew": "משתמש",
          "permissions": ["profile.read", "profile.update"]
        }
      ]
    },
    "auditTrail": {
      "enabled": true,
      "retention": "2y",
      "anonymizeAfter": "1y",
      "description": "מעקב פעילות משתמשי KYKY"
    }
  }
}
